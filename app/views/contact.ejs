<!doctype html>

<!-- ASSIGN OUR ANGULAR MODULE -->
<html ng-app="griffinaProduct">

<head>
<!-- META -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"><!-- Optimize mobile viewport -->

	<title>The Victoria Blake Collection</title>

	<!-- SCROLLS -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"><!-- load bootstrap -->
	<link href="../css/boilerplate.css" rel="stylesheet" type="text/css">
	<link href="../css/style.css" rel="stylesheet" type="text/css">
  <link href="../css/navigation.css" rel="stylesheet" type="text/css">
	<link href="../css/contact_form.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="../css/sweetalert.css">
	<!-- SPELLS -->
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.16/angular.min.js"></script><!-- load angular -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

  <script src="../js/sweetalert.min.js"></script>

	<script type="text/javascript" src="application.js"></script>
	<!--<script type="text/javascript" src="/lib/angular/angular.js"></script>-->
	<script src="../js/respond.min.js"></script>

	<script src="../js/controllers/main.js"></script> <!-- load up our controller -->
	<script src="../js/services/products.js"></script> <!-- load our product service -->
	<script src="../js/core.js"></script> <!-- load our main application -->
 <!--<script src="../js/emailer.js"></script>-->
  <script src="../js/twitter.js"></script>
  <script src="../js/facebook.js"></script>

            <!-- image upload script-->
     <script>
     

       function previewFile(){
           var preview = document.querySelectorAll('img')[1]; //selects the query named img
           var file    = document.querySelector('input[type=file]').files[0]; //sames as here
           var reader  = new FileReader();
           reader.onloadend = function () {
               preview.src = reader.result;
                //console.log(preview.src.length);
                var url = preview.src;
                
           }

           if (file) {
               reader.readAsDataURL(file); //reads the data as a URL
           } else {
               preview.src = "";
           }
      }

      function getURI(form,width,height){
        //console.log(document.querySelector('input[type=file]').files[0])
        //console.log(document.querySelectorAll('img')[1].src.length)
        if(document.querySelector('input[type=file]').files[0]){
          var preview = document.querySelectorAll('img')[1];//selects the query named img
          //var url = preview.src; 

          var canvas = document.createElement('canvas'),
          ctx = canvas.getContext('2d');

          // set its dimension to target size
          canvas.width = width;
          canvas.height = height;

          // draw source image into the off-screen canvas:
          ctx.drawImage(document.querySelectorAll('img')[1], 0, 0, width, height);

          //var url;
          //console.log(canvas.toDataURL())
          form.elements["uri"].value = canvas.toDataURL()
          form.elements["add"].value = "Picture added"
          }
      }

      previewFile();  //calls the function named previewFile()    
  </script>

            <!-- image upload script end -->

	<!--google fonts-->
	<link href='http://fonts.googleapis.com/css?family=Carrois+Gothic+SC' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Droid+Sans+Mono' rel='stylesheet' type='text/css'>
</head>
<body ng-controller="mainController">

<section id="wrapper">

<header>
	<% include header %>
</header>
<nav>
	<% include nav %>
</nav>

<section id="content">


<div id="contact_form">
    <h4>Contact</h4>   
    <form id="form" action="/send" method="POST">
        <!-- <input id="to" type="text" placeholder="PayPal User Name" class="contact_bg" required autofocus/> -->

        <input id="subject" type="email" name="email" placeholder="Email" class="contact_bg" required/>

        <input id ="firstName" type="text" name="fn" placeholder = "First Name" class="contact_bg" required/>

        <input id = "lastName" type="text" name="ln" placeholder = "Last Name" class="contact_bg" required/>

        <textarea id="address" cols="40" name="address"rows="5" placeholder="Address" class="contact_details" required></textarea>

        <input id = "city" type="text" name="city" placeholder = "City" class="contact_bg" required/>

        <input id = "zip" type="text" name="zip" placeholder = "zip" class="contact_bg" required/>

        <input id = "phone" type="text" name="phone" placeholder = "phone"  class="contact_bg"required/>

        <input type="button"  onClick="getURI(this.form,400,400)" value= "Click to add Picture after uploading a file" name="add">
        
        <input type="hidden" name="uri">

        <!-- <button  name="submit" id="send_email">Send Email</button> -->

        <input id="upload" type="file" name="file" onchange="previewFile()"><br>

        <img src="" id ="img" height="200" alt="Image preview...">

          <!-- <p id="demo"></p> -->

        <input type="submit" name="submit" value="Send" id="send_email" />
    </form>
<span id="message"></span>
</div>
</div>

</section><!--end of content-->
<footer>
    <!-- <div id="copyRight"><p>&copy;Copyright</p></div> -->
    <div id ="twitter">
    <a class="twitter-follow-button"
        href="https://twitter.com/seeuniqueness">
        Follow @Griffina blake</a>
    </div>
    <div id="facebook">
      <div class="fb-like" data-href="https://www.facebook.com/VictoriaBlakeFashionDesigns" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true"></div>
    </div>
<!-- <div id="skype"><script type="text/javascript" src="http://www.skypeassets.com/i/scom/js/skype-uri.js"></script>
<div id="SkypeButton_Call_abdulrahman_bah_1">
  <script type="text/javascript">
    Skype.ui({
      "name": "call",
      "element": "SkypeButton_Call_abdulrahman_bah_1",
      "participants": ["abdulrahman_bah"],
      "imageSize": 32
    });
  </script>
</div>
</div> --><!--end of skype-->
</footer><!--end of footer-->
</section><!--end of wrapper-->
</body>
</html>
